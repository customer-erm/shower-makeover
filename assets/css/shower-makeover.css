/**
 * Shower Makeover Pro - Light Mode Elegant Design
 */

/* ==========================================
   CSS VARIABLES & BASE
   ========================================== */
:root {
    --sm-primary: #0284c7;
    --sm-primary-light: #e0f2fe;
    --sm-primary-dark: #0369a1;
    --sm-accent: #7c3aed;
    --sm-success: #059669;
    --sm-success-light: #d1fae5;
    --sm-warning: #d97706;
    --sm-dark: #1e293b;
    --sm-dark-700: #334155;
    --sm-gray-600: #475569;
    --sm-gray-500: #64748b;
    --sm-gray-400: #94a3b8;
    --sm-gray-300: #cbd5e1;
    --sm-gray-200: #e2e8f0;
    --sm-gray-100: #f1f5f9;
    --sm-gray-50: #f8fafc;
    --sm-white: #ffffff;
    --sm-radius: 12px;
    --sm-radius-sm: 8px;
    --sm-radius-lg: 16px;
    --sm-shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
    --sm-shadow: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06);
    --sm-shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    --sm-shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    --sm-font: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    --sm-font-display: 'Plus Jakarta Sans', var(--sm-font);
}

.sm-app {
    position: relative;
    min-height: 100vh;
    background: var(--sm-gray-50);
    font-family: var(--sm-font);
    color: var(--sm-dark);
}

.sm-app *, .sm-app *::before, .sm-app *::after {
    box-sizing: border-box;
}

.sm-ambient { display: none; }

.sm-container {
    display: grid;
    grid-template-columns: 460px 1fr;
    min-height: 100vh;
}

/* ==========================================
   DESIGN PANEL (LEFT)
   ========================================== */
.sm-design-panel {
    background: var(--sm-white);
    border-right: 1px solid var(--sm-gray-200);
    padding: 32px;
    overflow-y: auto;
    max-height: 100vh;
}

.sm-panel-header {
    text-align: center;
    margin-bottom: 24px;
    padding-bottom: 24px;
    border-bottom: 1px solid var(--sm-gray-200);
}

.sm-panel-header h1 {
    font-family: var(--sm-font-display);
    font-size: 26px;
    font-weight: 800;
    color: var(--sm-dark);
    margin: 0 0 6px 0;
    letter-spacing: -0.5px;
}

.sm-gradient-text {
    background: linear-gradient(135deg, var(--sm-primary) 0%, var(--sm-accent) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.sm-panel-header p {
    font-size: 14px;
    color: var(--sm-gray-500);
    margin: 0;
}

.sm-progress {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 24px;
    padding: 10px 14px;
    background: var(--sm-gray-50);
    border: 1px solid var(--sm-gray-200);
    border-radius: var(--sm-radius-sm);
}

.sm-progress-bar {
    flex: 1;
    height: 6px;
    background: var(--sm-gray-200);
    border-radius: 3px;
    overflow: hidden;
}

.sm-progress-fill {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, var(--sm-primary) 0%, var(--sm-accent) 100%);
    border-radius: 3px;
    transition: width 0.4s ease;
}

.sm-progress-text {
    font-size: 12px;
    font-weight: 600;
    color: var(--sm-primary);
    white-space: nowrap;
}

/* ==========================================
   STEPS
   ========================================== */
.sm-step {
    margin-bottom: 24px;
    padding-bottom: 20px;
    border-bottom: 1px solid var(--sm-gray-200);
}

.sm-step:last-of-type { border-bottom: none; }

.sm-step-header {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    margin-bottom: 14px;
}

.sm-step-badge {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 26px;
    height: 26px;
    background: var(--sm-primary);
    color: var(--sm-white);
    font-size: 12px;
    font-weight: 700;
    border-radius: 50%;
    flex-shrink: 0;
}

.sm-step-header h2 {
    font-family: var(--sm-font-display);
    font-size: 15px;
    font-weight: 700;
    color: var(--sm-dark);
    margin: 0 0 2px 0;
}

.sm-step-header p {
    font-size: 13px;
    color: var(--sm-gray-500);
    margin: 0;
}

/* ==========================================
   BASE TYPE OPTIONS
   ========================================== */
.sm-base-options {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
}

.sm-base-option {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 18px 14px;
    background: var(--sm-white);
    border: 2px solid var(--sm-gray-200);
    border-radius: var(--sm-radius);
    cursor: pointer;
    transition: all 0.2s ease;
    text-align: center;
}

.sm-base-option:hover {
    border-color: var(--sm-gray-300);
    background: var(--sm-gray-50);
}

.sm-base-option.selected {
    border-color: var(--sm-primary);
    background: var(--sm-primary-light);
}

.sm-base-option input { position: absolute; opacity: 0; pointer-events: none; }

.sm-base-icon {
    width: 48px;
    height: 48px;
    margin-bottom: 10px;
    color: var(--sm-gray-400);
    transition: color 0.2s ease;
}

.sm-base-option.selected .sm-base-icon { color: var(--sm-primary); }
.sm-base-icon svg { width: 100%; height: 100%; }

.sm-base-content strong {
    display: block;
    font-size: 13px;
    font-weight: 600;
    color: var(--sm-dark);
    margin-bottom: 2px;
}

.sm-base-content span {
    font-size: 11px;
    color: var(--sm-gray-500);
    line-height: 1.3;
}

/* ==========================================
   CARD GRID
   ========================================== */
.sm-card-grid { display: grid; gap: 8px; }
.sm-layout-grid { grid-template-columns: repeat(3, 1fr); }
.sm-glass-grid { grid-template-columns: repeat(5, 1fr); }

.sm-card {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 14px 8px 10px;
    background: var(--sm-white);
    border: 2px solid var(--sm-gray-200);
    border-radius: var(--sm-radius-sm);
    cursor: pointer;
    transition: all 0.2s ease;
    text-align: center;
}

.sm-card:hover { border-color: var(--sm-gray-300); background: var(--sm-gray-50); }
.sm-card.selected { border-color: var(--sm-primary); background: var(--sm-primary-light); }
.sm-card input { position: absolute; opacity: 0; pointer-events: none; }

.sm-card-visual {
    width: 40px;
    height: 40px;
    margin-bottom: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.sm-layout-icon {
    width: 100%;
    height: 100%;
    background: var(--sm-gray-400);
    mask-size: contain;
    mask-repeat: no-repeat;
    mask-position: center;
    -webkit-mask-size: contain;
    -webkit-mask-repeat: no-repeat;
    -webkit-mask-position: center;
}

.sm-card.selected .sm-layout-icon { background: var(--sm-primary); }

.sm-layout-icon[data-layout="inline"] { mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 48 48' xmlns='http://www.w3.org/2000/svg'%3E%3Crect x='12' y='8' width='24' height='32' fill='none' stroke='%23000' stroke-width='2'/%3E%3Ccircle cx='32' cy='24' r='2' fill='%23000'/%3E%3C/svg%3E"); -webkit-mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 48 48' xmlns='http://www.w3.org/2000/svg'%3E%3Crect x='12' y='8' width='24' height='32' fill='none' stroke='%23000' stroke-width='2'/%3E%3Ccircle cx='32' cy='24' r='2' fill='%23000'/%3E%3C/svg%3E"); }
.sm-layout-icon[data-layout="doorPanel"] { mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 48 48' xmlns='http://www.w3.org/2000/svg'%3E%3Crect x='8' y='8' width='16' height='32' fill='none' stroke='%23000' stroke-width='2'/%3E%3Crect x='24' y='8' width='16' height='32' fill='none' stroke='%23000' stroke-width='2' stroke-dasharray='4'/%3E%3Ccircle cx='22' cy='24' r='2' fill='%23000'/%3E%3C/svg%3E"); -webkit-mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 48 48' xmlns='http://www.w3.org/2000/svg'%3E%3Crect x='8' y='8' width='16' height='32' fill='none' stroke='%23000' stroke-width='2'/%3E%3Crect x='24' y='8' width='16' height='32' fill='none' stroke='%23000' stroke-width='2' stroke-dasharray='4'/%3E%3Ccircle cx='22' cy='24' r='2' fill='%23000'/%3E%3C/svg%3E"); }
.sm-layout-icon[data-layout="corner"] { mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 48 48' xmlns='http://www.w3.org/2000/svg'%3E%3Cpolyline points='8,40 8,8 40,8' fill='none' stroke='%23000' stroke-width='2'/%3E%3Ccircle cx='8' cy='24' r='2' fill='%23000'/%3E%3C/svg%3E"); -webkit-mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 48 48' xmlns='http://www.w3.org/2000/svg'%3E%3Cpolyline points='8,40 8,8 40,8' fill='none' stroke='%23000' stroke-width='2'/%3E%3Ccircle cx='8' cy='24' r='2' fill='%23000'/%3E%3C/svg%3E"); }
.sm-layout-icon[data-layout="neoAngle"] { mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 48 48' xmlns='http://www.w3.org/2000/svg'%3E%3Cpolyline points='8,40 8,20 20,8 40,8' fill='none' stroke='%23000' stroke-width='2'/%3E%3Ccircle cx='14' cy='14' r='2' fill='%23000'/%3E%3C/svg%3E"); -webkit-mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 48 48' xmlns='http://www.w3.org/2000/svg'%3E%3Cpolyline points='8,40 8,20 20,8 40,8' fill='none' stroke='%23000' stroke-width='2'/%3E%3Ccircle cx='14' cy='14' r='2' fill='%23000'/%3E%3C/svg%3E"); }
.sm-layout-icon[data-layout="walkIn"] { mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 48 48' xmlns='http://www.w3.org/2000/svg'%3E%3Cpolyline points='8,40 8,8 28,8' fill='none' stroke='%23000' stroke-width='2'/%3E%3Cline x1='28' y1='8' x2='40' y2='8' stroke='%23000' stroke-width='2' stroke-dasharray='4'/%3E%3C/svg%3E"); -webkit-mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 48 48' xmlns='http://www.w3.org/2000/svg'%3E%3Cpolyline points='8,40 8,8 28,8' fill='none' stroke='%23000' stroke-width='2'/%3E%3Cline x1='28' y1='8' x2='40' y2='8' stroke='%23000' stroke-width='2' stroke-dasharray='4'/%3E%3C/svg%3E"); }
.sm-layout-icon[data-layout="slider"] { mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 48 48' xmlns='http://www.w3.org/2000/svg'%3E%3Crect x='8' y='8' width='32' height='32' fill='none' stroke='%23000' stroke-width='2'/%3E%3Cline x1='24' y1='8' x2='24' y2='40' stroke='%23000' stroke-width='2'/%3E%3Cpath d='M20,24 L28,24' stroke='%23000' stroke-width='3'/%3E%3C/svg%3E"); -webkit-mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 48 48' xmlns='http://www.w3.org/2000/svg'%3E%3Crect x='8' y='8' width='32' height='32' fill='none' stroke='%23000' stroke-width='2'/%3E%3Cline x1='24' y1='8' x2='24' y2='40' stroke='%23000' stroke-width='2'/%3E%3Cpath d='M20,24 L28,24' stroke='%23000' stroke-width='3'/%3E%3C/svg%3E"); }

.sm-card-content { display: flex; flex-direction: column; gap: 1px; }
.sm-card-content strong { font-size: 11px; font-weight: 600; color: var(--sm-dark); }
.sm-card-content span { font-size: 9px; color: var(--sm-gray-500); line-height: 1.2; }

.sm-card-compact { padding: 10px 6px 8px; }

.sm-glass-swatch {
    width: 36px;
    height: 36px;
    border-radius: 6px;
    margin-bottom: 6px;
    border: 1px solid var(--sm-gray-200);
}

.sm-glass-swatch[data-glass="clear"] { background: linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(230,240,250,0.9) 100%); }
.sm-glass-swatch[data-glass="starphire"] { background: linear-gradient(135deg, #fff 0%, #f0faff 100%); }
.sm-glass-swatch[data-glass="frosted"] { background: linear-gradient(135deg, #e0e8f0 0%, #c8d8e8 100%); }
.sm-glass-swatch[data-glass="rain"] { background: repeating-linear-gradient(90deg, rgba(200,215,230,0.9), rgba(200,215,230,0.9) 2px, rgba(240,245,250,0.95) 2px, rgba(240,245,250,0.95) 5px); }
.sm-glass-swatch[data-glass="gray"] { background: linear-gradient(135deg, rgba(120,130,145,0.6) 0%, rgba(90,100,115,0.5) 100%); }

/* ==========================================
   SWATCH ROW
   ========================================== */
.sm-swatch-row { display: flex; flex-wrap: wrap; gap: 10px; }

.sm-swatch {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 5px;
    cursor: pointer;
}

.sm-swatch input { position: absolute; opacity: 0; pointer-events: none; }

.sm-swatch-color {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    border: 3px solid var(--sm-white);
    box-shadow: 0 2px 6px rgba(0,0,0,0.15), inset 0 1px 3px rgba(255,255,255,0.3);
    transition: all 0.2s ease;
}

.sm-swatch:hover .sm-swatch-color { transform: scale(1.08); }
.sm-swatch.selected .sm-swatch-color {
    border-color: var(--sm-primary);
    box-shadow: 0 0 0 3px var(--sm-primary-light), 0 2px 6px rgba(0,0,0,0.15);
}

.sm-swatch-name {
    font-size: 9px;
    color: var(--sm-gray-500);
    text-align: center;
    max-width: 52px;
    line-height: 1.2;
}

/* ==========================================
   PILL ROW
   ========================================== */
.sm-pill-row { display: flex; flex-wrap: wrap; gap: 8px; }

.sm-pill {
    position: relative;
    display: flex;
    align-items: center;
    padding: 8px 14px;
    background: var(--sm-white);
    border: 2px solid var(--sm-gray-200);
    border-radius: 100px;
    cursor: pointer;
    transition: all 0.2s ease;
    font-size: 12px;
    color: var(--sm-gray-600);
}

.sm-pill:hover { border-color: var(--sm-gray-300); background: var(--sm-gray-50); }
.sm-pill.selected { border-color: var(--sm-primary); background: var(--sm-primary-light); color: var(--sm-primary-dark); }
.sm-pill input { position: absolute; opacity: 0; pointer-events: none; }

/* ==========================================
   UPGRADES
   ========================================== */
.sm-upgrade-list { display: flex; flex-direction: column; gap: 8px; }

.sm-upgrade {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 14px;
    background: var(--sm-white);
    border: 2px solid var(--sm-gray-200);
    border-radius: var(--sm-radius-sm);
    cursor: pointer;
    transition: all 0.2s ease;
}

.sm-upgrade:hover { border-color: var(--sm-gray-300); background: var(--sm-gray-50); }
.sm-upgrade input { position: absolute; opacity: 0; pointer-events: none; }

.sm-upgrade-check {
    width: 20px;
    height: 20px;
    border: 2px solid var(--sm-gray-300);
    border-radius: 5px;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
}

.sm-upgrade input:checked + .sm-upgrade-check { background: var(--sm-success); border-color: var(--sm-success); }
.sm-upgrade input:checked + .sm-upgrade-check::after { content: 'âœ“'; color: var(--sm-white); font-size: 11px; font-weight: 700; }

.sm-upgrade-info { flex: 1; }
.sm-upgrade-info strong { display: block; font-size: 13px; font-weight: 600; color: var(--sm-dark); margin-bottom: 1px; }
.sm-upgrade-info span { font-size: 11px; color: var(--sm-gray-500); }

/* ==========================================
   PHOTO TIPS
   ========================================== */
.sm-tips-bar {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 12px;
    background: var(--sm-primary-light);
    border: 1px solid rgba(2, 132, 199, 0.2);
    border-radius: var(--sm-radius-sm);
    margin-bottom: 10px;
    cursor: pointer;
    font-size: 12px;
    color: var(--sm-primary-dark);
}

.sm-tips-bar:hover { background: rgba(224, 242, 254, 0.8); }
.sm-tips-bar svg { width: 16px; height: 16px; flex-shrink: 0; }
.sm-tips-arrow { margin-left: auto; transition: transform 0.2s ease; }
.sm-tips-bar.active .sm-tips-arrow { transform: rotate(180deg); }

.sm-tips-content {
    display: none;
    padding: 12px;
    background: var(--sm-gray-50);
    border: 1px solid var(--sm-gray-200);
    border-radius: var(--sm-radius-sm);
    margin-bottom: 10px;
}

.sm-tips-content.show { display: block; }
.sm-tip { display: flex; gap: 8px; margin-bottom: 8px; }
.sm-tip:last-child { margin-bottom: 0; }
.sm-tip span { font-size: 16px; }
.sm-tip p { font-size: 11px; color: var(--sm-gray-600); margin: 0; line-height: 1.4; }
.sm-tip strong { color: var(--sm-dark); }

/* ==========================================
   UPLOAD ZONE
   ========================================== */
.sm-upload-zone {
    position: relative;
    border: 2px dashed var(--sm-gray-300);
    border-radius: var(--sm-radius);
    background: var(--sm-gray-50);
    transition: all 0.2s ease;
    overflow: hidden;
}

.sm-upload-zone:hover, .sm-upload-zone.dragover { border-color: var(--sm-primary); background: var(--sm-primary-light); }
.sm-upload-zone input { position: absolute; inset: 0; opacity: 0; cursor: pointer; z-index: 2; }

.sm-upload-prompt { padding: 32px 16px; text-align: center; }
.sm-upload-icon { width: 44px; height: 44px; margin: 0 auto 12px; color: var(--sm-gray-400); }
.sm-upload-icon svg { width: 100%; height: 100%; }
.sm-upload-prompt p { font-size: 13px; color: var(--sm-dark); margin: 0 0 4px 0; }
.sm-upload-prompt span { font-size: 11px; color: var(--sm-gray-500); }

.sm-upload-preview { display: none; position: relative; }
.sm-upload-preview.show { display: block; }
.sm-upload-preview img { width: 100%; max-height: 180px; object-fit: contain; background: var(--sm-gray-100); }

.sm-preview-remove {
    position: absolute;
    top: 8px;
    right: 8px;
    width: 28px;
    height: 28px;
    background: rgba(239, 68, 68, 0.9);
    color: var(--sm-white);
    border: none;
    border-radius: 50%;
    font-size: 18px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 3;
}

.sm-preview-remove:hover { background: #ef4444; transform: scale(1.1); }

/* ==========================================
   SUBMIT BUTTON
   ========================================== */
.sm-submit-btn {
    width: 100%;
    padding: 16px 24px;
    background: var(--sm-primary);
    color: var(--sm-white);
    border: none;
    border-radius: var(--sm-radius-sm);
    font-family: var(--sm-font-display);
    font-size: 15px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.2s ease;
    margin-top: 8px;
}

.sm-submit-btn:hover { background: var(--sm-primary-dark); transform: translateY(-1px); box-shadow: var(--sm-shadow-md); }
.sm-submit-btn:disabled { opacity: 0.7; cursor: not-allowed; transform: none; }

.sm-btn-content { display: flex; align-items: center; justify-content: center; gap: 8px; }
.sm-btn-content svg { width: 18px; height: 18px; }
.sm-btn-loading { display: none; align-items: center; justify-content: center; gap: 10px; }
.sm-submit-btn.loading .sm-btn-content { display: none; }
.sm-submit-btn.loading .sm-btn-loading { display: flex; }

.sm-spinner {
    width: 18px;
    height: 18px;
    border: 2px solid rgba(255,255,255,0.3);
    border-top-color: var(--sm-white);
    border-radius: 50%;
    animation: sm-spin 0.8s linear infinite;
}

@keyframes sm-spin { to { transform: rotate(360deg); } }

.sm-guarantee {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    margin-top: 12px;
    font-size: 11px;
    color: var(--sm-gray-500);
}

.sm-guarantee svg { width: 14px; height: 14px; color: var(--sm-success); }

/* ==========================================
   RESULTS PANEL
   ========================================== */
.sm-results-panel {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 32px;
    min-height: 100vh;
    overflow-y: auto;
    background: var(--sm-gray-100);
}

.sm-results-panel:has(.sm-placeholder:not([style*="display: none"])) { justify-content: center; }
.sm-results-panel:has(.sm-loading.show) { justify-content: center; }
.sm-results-panel:has(.sm-results.show) { justify-content: flex-start; padding-top: 24px; }

/* Placeholder */
.sm-placeholder { text-align: center; max-width: 360px; }
.sm-placeholder-visual { margin-bottom: 24px; }

.sm-shower-illustration { position: relative; width: 140px; height: 180px; margin: 0 auto; }
.sm-shower-frame { position: absolute; inset: 0; border: 2px solid var(--sm-gray-300); border-radius: 4px 4px 0 0; }
.sm-shower-glass {
    position: absolute;
    top: 10px;
    left: 10px;
    right: 50px;
    bottom: 0;
    background: linear-gradient(135deg, rgba(2, 132, 199, 0.08) 0%, rgba(2, 132, 199, 0.02) 100%);
    border: 1px solid var(--sm-gray-200);
    animation: sm-shimmer 3s ease-in-out infinite;
}

@keyframes sm-shimmer { 0%, 100% { opacity: 0.6; } 50% { opacity: 1; } }

.sm-shower-drops { position: absolute; top: 25px; left: 50%; display: flex; gap: 5px; }
.sm-shower-drops span { width: 4px; height: 4px; background: var(--sm-primary); border-radius: 50%; animation: sm-drop 1.5s ease-in-out infinite; }
.sm-shower-drops span:nth-child(2) { animation-delay: 0.2s; }
.sm-shower-drops span:nth-child(3) { animation-delay: 0.4s; }

@keyframes sm-drop { 0%, 100% { transform: translateY(0); opacity: 1; } 50% { transform: translateY(70px); opacity: 0; } }

.sm-placeholder h3 { font-family: var(--sm-font-display); font-size: 22px; font-weight: 700; color: var(--sm-dark); margin: 0 0 8px 0; }
.sm-placeholder p { font-size: 14px; color: var(--sm-gray-500); margin: 0; line-height: 1.5; }

/* ==========================================
   LOADING - Shower Door Style
   ========================================== */
.sm-loading { display: none; text-align: center; max-width: 360px; }
.sm-loading.show { display: block; }

.sm-loading-visual { position: relative; width: 120px; height: 160px; margin: 0 auto 24px; }
.sm-loading-frame { position: absolute; inset: 0; border: 3px solid var(--sm-gray-300); border-radius: 4px 4px 0 0; }

.sm-loading-door {
    position: absolute;
    top: 8px;
    left: 8px;
    right: 40px;
    bottom: 0;
    background: linear-gradient(135deg, rgba(2, 132, 199, 0.15) 0%, rgba(2, 132, 199, 0.05) 100%);
    border: 2px solid var(--sm-primary);
    border-radius: 2px;
    transform-origin: left center;
    animation: sm-door-swing 2s ease-in-out infinite;
}

.sm-loading-door::after {
    content: '';
    position: absolute;
    right: 8px;
    top: 50%;
    transform: translateY(-50%);
    width: 6px;
    height: 24px;
    background: var(--sm-primary);
    border-radius: 3px;
}

@keyframes sm-door-swing { 0%, 100% { transform: perspective(200px) rotateY(0deg); } 50% { transform: perspective(200px) rotateY(-25deg); } }

.sm-loading-drops { position: absolute; top: 20px; right: 20px; display: flex; flex-direction: column; gap: 8px; }
.sm-loading-drops span { width: 6px; height: 6px; background: var(--sm-primary); border-radius: 50%; animation: sm-loading-drop 1s ease-in-out infinite; }
.sm-loading-drops span:nth-child(2) { animation-delay: 0.15s; }
.sm-loading-drops span:nth-child(3) { animation-delay: 0.3s; }

@keyframes sm-loading-drop { 0%, 100% { transform: translateY(0); opacity: 1; } 50% { transform: translateY(100px); opacity: 0; } }

.sm-loading h3 { font-family: var(--sm-font-display); font-size: 20px; font-weight: 700; color: var(--sm-dark); margin: 0 0 6px 0; }
.sm-loading p { font-size: 14px; color: var(--sm-gray-500); margin: 0 0 20px 0; }

.sm-loading-bar { height: 4px; background: var(--sm-gray-200); border-radius: 2px; overflow: hidden; margin-bottom: 8px; }
.sm-loading-fill { height: 100%; background: linear-gradient(90deg, var(--sm-primary), var(--sm-accent)); width: 0%; animation: sm-load-progress 25s ease-out forwards; }

@keyframes sm-load-progress { 0% { width: 0%; } 50% { width: 70%; } 80% { width: 90%; } 100% { width: 95%; } }

.sm-loading-time { font-size: 11px; color: var(--sm-gray-400); }

/* Error */
.sm-error { display: none; text-align: center; max-width: 360px; }
.sm-error.show { display: block; }
.sm-error-icon { width: 56px; height: 56px; margin: 0 auto 20px; color: #ef4444; }
.sm-error-icon svg { width: 100%; height: 100%; }
.sm-error h3 { font-family: var(--sm-font-display); font-size: 20px; font-weight: 700; color: var(--sm-dark); margin: 0 0 6px 0; }
.sm-error p { font-size: 14px; color: var(--sm-gray-500); margin: 0 0 20px 0; }
.sm-error-retry { padding: 10px 28px; background: var(--sm-primary); color: var(--sm-white); border: none; border-radius: var(--sm-radius-sm); font-size: 14px; font-weight: 600; cursor: pointer; }

/* ==========================================
   RESULTS
   ========================================== */
.sm-results { display: none; width: 100%; max-width: 800px; }
.sm-results.show { display: block; }

.sm-comparison {
    position: relative;
    border-radius: var(--sm-radius-lg);
    overflow: hidden;
    box-shadow: var(--sm-shadow-lg);
    margin-bottom: 20px;
    background: var(--sm-white);
    max-height: 550px;
}

.sm-comp-after, .sm-comp-before { width: 100%; }
.sm-comp-after img, .sm-comp-before img { width: 100%; height: auto; max-height: 550px; object-fit: contain; display: block; background: var(--sm-gray-100); }

.sm-comp-before { position: absolute; top: 0; left: 0; width: 50%; height: 100%; overflow: hidden; z-index: 2; }
.sm-comp-before img { position: absolute; top: 0; left: 0; width: auto; height: 100%; max-width: none; max-height: 100%; }

.sm-comp-labels { position: absolute; bottom: 12px; left: 12px; right: 12px; display: flex; justify-content: space-between; z-index: 5; pointer-events: none; }
.sm-label-before, .sm-label-after { padding: 6px 12px; background: rgba(0, 0, 0, 0.6); color: var(--sm-white); font-size: 10px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; border-radius: 100px; }

.sm-comp-handle { position: absolute; top: 0; bottom: 0; left: 50%; width: 44px; margin-left: -22px; cursor: ew-resize; z-index: 10; }
.sm-handle-line { position: absolute; top: 0; bottom: 0; left: 50%; width: 3px; margin-left: -1.5px; background: var(--sm-white); box-shadow: 0 0 10px rgba(0, 0, 0, 0.3); }
.sm-handle-grip { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 40px; height: 40px; background: var(--sm-white); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: var(--sm-shadow-md); }
.sm-handle-grip svg { width: 14px; height: 14px; fill: var(--sm-dark); }

.sm-info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 20px; }

.sm-dims-card { background: var(--sm-white); border: 1px solid var(--sm-gray-200); border-radius: var(--sm-radius); padding: 16px; }
.sm-dims-header { display: flex; align-items: flex-start; gap: 10px; margin-bottom: 12px; }
.sm-dims-header svg { width: 28px; height: 28px; color: var(--sm-accent); flex-shrink: 0; }
.sm-dims-header h4 { font-family: var(--sm-font-display); font-size: 14px; font-weight: 700; color: var(--sm-dark); margin: 0 0 2px 0; }
.sm-dims-header p { font-size: 11px; color: var(--sm-gray-500); margin: 0; }
.sm-dims-display { background: var(--sm-gray-50); border-radius: var(--sm-radius-sm); padding: 12px; text-align: center; margin-bottom: 8px; }
.sm-dims-display .sm-dims-loading { font-size: 13px; color: var(--sm-gray-500); font-style: italic; }
.sm-dims-main { font-family: var(--sm-font-display); font-size: 22px; font-weight: 800; color: var(--sm-dark); letter-spacing: -0.3px; }
.sm-dims-breakdown { display: flex; justify-content: center; gap: 16px; margin-top: 6px; font-size: 12px; color: var(--sm-gray-500); }
.sm-dims-breakdown span { display: flex; align-items: center; gap: 3px; }
.sm-dims-breakdown strong { color: var(--sm-dark); }
.sm-dims-disclaimer { font-size: 10px; color: var(--sm-gray-400); margin: 0; font-style: italic; }

.sm-selections-card { background: var(--sm-white); border: 1px solid var(--sm-gray-200); border-radius: var(--sm-radius); padding: 16px; }
.sm-selections-card h4 { font-family: var(--sm-font-display); font-size: 14px; font-weight: 700; color: var(--sm-dark); margin: 0 0 10px 0; }

.sm-summary-bar { display: flex; flex-wrap: wrap; gap: 6px; }
.sm-summary-tag { padding: 5px 10px; background: var(--sm-gray-100); border: 1px solid var(--sm-gray-200); border-radius: 100px; font-size: 11px; color: var(--sm-gray-600); }

.sm-ai-card { background: var(--sm-white); border: 1px solid var(--sm-gray-200); border-radius: var(--sm-radius); padding: 20px; margin-bottom: 20px; }
.sm-ai-header { display: flex; align-items: center; gap: 12px; margin-bottom: 16px; padding-bottom: 12px; border-bottom: 1px solid var(--sm-gray-200); }
.sm-ai-avatar { width: 40px; height: 40px; background: linear-gradient(135deg, var(--sm-primary) 0%, var(--sm-accent) 100%); border-radius: 10px; display: flex; align-items: center; justify-content: center; color: var(--sm-white); }
.sm-ai-avatar svg { width: 22px; height: 22px; }
.sm-ai-header strong { display: block; font-family: var(--sm-font-display); font-size: 14px; font-weight: 700; color: var(--sm-dark); }
.sm-ai-header span { font-size: 12px; color: var(--sm-gray-500); }
.sm-ai-content { font-size: 14px; line-height: 1.7; color: var(--sm-gray-600); }
.sm-ai-content p { margin: 0 0 12px 0; color: var(--sm-gray-600); }
.sm-ai-content p:last-child { margin-bottom: 0; }
.sm-ai-content strong { color: var(--sm-dark); font-weight: 600; }

.sm-next-steps { background: var(--sm-white); border: 1px solid var(--sm-gray-200); border-radius: var(--sm-radius); padding: 20px; margin-bottom: 20px; }
.sm-next-steps h4 { font-family: var(--sm-font-display); font-size: 16px; font-weight: 700; color: var(--sm-dark); margin: 0 0 16px 0; }
.sm-steps-list { display: flex; flex-direction: column; gap: 12px; }
.sm-next-step { display: flex; gap: 14px; padding: 14px; background: var(--sm-gray-50); border-radius: var(--sm-radius-sm); border: 1px solid var(--sm-gray-200); }
.sm-next-step .sm-step-num { width: 28px; height: 28px; background: var(--sm-primary); color: var(--sm-white); font-size: 12px; font-weight: 700; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
.sm-next-step strong { display: block; font-size: 13px; font-weight: 600; color: var(--sm-dark); margin-bottom: 2px; }
.sm-next-step p { font-size: 12px; color: var(--sm-gray-500); margin: 0; line-height: 1.4; }

.sm-cta-card { background: linear-gradient(135deg, var(--sm-success-light) 0%, var(--sm-primary-light) 100%); border: 1px solid rgba(5, 150, 105, 0.2); border-radius: var(--sm-radius); padding: 28px; text-align: center; margin-bottom: 16px; }
.sm-cta-card h3 { font-family: var(--sm-font-display); font-size: 24px; font-weight: 800; color: var(--sm-dark); margin: 0 0 6px 0; }
.sm-cta-card p { font-size: 14px; color: var(--sm-gray-600); margin: 0 0 20px 0; }
.sm-cta-btn { display: inline-flex; align-items: center; gap: 8px; padding: 14px 32px; background: var(--sm-success); color: var(--sm-white) !important; text-decoration: none; border-radius: var(--sm-radius-sm); font-family: var(--sm-font-display); font-size: 15px; font-weight: 700; transition: all 0.2s ease; box-shadow: var(--sm-shadow-md); }
.sm-cta-btn:hover { background: #047857; transform: translateY(-2px); box-shadow: var(--sm-shadow-lg); color: var(--sm-white) !important; }
.sm-cta-btn svg { width: 18px; height: 18px; }
.sm-cta-phone { display: block; margin-top: 12px; font-size: 13px; color: var(--sm-gray-600) !important; text-decoration: none; }
.sm-cta-phone strong { color: var(--sm-dark); }

.sm-restart { display: flex; align-items: center; justify-content: center; gap: 6px; width: 100%; padding: 12px; background: var(--sm-white); border: 1px solid var(--sm-gray-200); border-radius: var(--sm-radius-sm); color: var(--sm-gray-500); font-size: 13px; cursor: pointer; transition: all 0.2s ease; }
.sm-restart:hover { border-color: var(--sm-primary); color: var(--sm-primary); }
.sm-restart svg { width: 16px; height: 16px; }

/* ==========================================
   RESPONSIVE
   ========================================== */
@media (max-width: 1100px) { .sm-container { grid-template-columns: 400px 1fr; } }

@media (max-width: 900px) {
    .sm-container { grid-template-columns: 1fr; }
    .sm-design-panel { max-height: none; border-right: none; border-bottom: 1px solid var(--sm-gray-200); }
    .sm-results-panel { min-height: auto; }
    .sm-info-grid { grid-template-columns: 1fr; }
}

@media (max-width: 640px) {
    .sm-design-panel { padding: 20px; }
    .sm-base-options { grid-template-columns: 1fr; }
    .sm-layout-grid { grid-template-columns: repeat(2, 1fr); }
    .sm-glass-grid { grid-template-columns: repeat(3, 1fr); }
    .sm-swatch-row { gap: 8px; }
    .sm-swatch-color { width: 36px; height: 36px; }
    .sm-swatch-name { font-size: 8px; max-width: 44px; }
    .sm-pill-row { gap: 6px; }
    .sm-pill { padding: 7px 11px; font-size: 11px; }
    .sm-cta-card { padding: 20px; }
    .sm-cta-card h3 { font-size: 20px; }
    .sm-next-step { flex-direction: column; gap: 10px; }
    .sm-dims-main { font-size: 18px; }
    .sm-dims-breakdown { flex-direction: column; gap: 4px; }
    .sm-comparison { max-height: 400px; }
    .sm-comp-after img, .sm-comp-before img { max-height: 400px; }
}
